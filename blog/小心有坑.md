# Vue

## 在 Vue 中使用防抖

vue2 去掉防抖大部分防抖文章都是用 Lodash 或者 Underscore 实现的，不得不说工具库虽然能方便解决问题提高效率但也降低了编程能力，其实防抖本身实现是非常简单的：

```javascript
function debounce (fn, delay) {
  // 声明一个变量存储 setTimeout 返回的 id
  let timeoutID = null
  return function () {
    // 清除 setTimeout()
    clearTimeout(timeoutID)
    const args = arguments
    const that = this
    // 触发这个函数的时候再次为 timeoutID 赋值
    timeoutID = setTimeout(function () {
      // 在 setTimeout 中调用需要防抖的函数
      fn.apply(that, args)
    }, delay)
  }
}
```

# Fabric.js
这个坑太难发现了，dom 元素会挡住下面的 canvas 对象.

避免 fabricjs 库的 IText 在编辑时页面会滚动的 bug
```javascript
textarea[data-fabric-hiddentextarea]{ position: fixed !important; }
setCoords 有时会不生效，这时候 obj.height += 1 换成 obj.set("height" ,obj.height + 1)
```

# HTML
input[type=file] 标签如果上传过相同文件则不会上传, 这时候只需要 file.value = '' 即可

# 血与泪的兼容 IE 8+ 历程

在 ie 上使用 flex 布局的 polyfill flexibility

在 ie8 上使用 rem 的 polyfill rem.js

在 ie8 上使用 border-radius 的 polyfill css3pie

支持 ie8 栅格化布局的组件库 bootstrap 3

在 ie 上使用 html5 的语义化标签 polyfill html5shiv

作为一个第一次以 ie8 作为主要开发对象的人来说，简直是地狱般的感受，这是我人生中第一次兼容 ie，我也会让它成为最后一次。

这次大概忙了一周左右，中间经历了很多，一开始打算用 flexibility 全用 flex 布局，后来发现坑太多然后用了 prue 的栅格化系统，然后发现坑太多换了 boostrap3 的栅格化系统
因为是官网所以 header footer 部分几乎相同，为了避免维护麻烦我先用 san.js(兼容 ie8 的spa框架)写了所有页面，然后写个脚本把所有的页面在转换成静态的（为了 seo）
最后用 jquery 写业务逻辑开发相关



